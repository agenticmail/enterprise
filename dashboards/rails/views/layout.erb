<!DOCTYPE html>
<html lang="en">
<head>
<meta charset="utf-8">
<meta name="viewport" content="width=device-width,initial-scale=1">
<title><%= title %> - AgenticMail Enterprise</title>
<link rel="stylesheet" href="/styles.css">
</head>
<body>
<aside class="sidebar">
  <div class="sidebar-brand">
    &#127970; AgenticMail Enterprise
    <small>Admin Dashboard &middot; Rails</small>
  </div>
  <nav class="sidebar-nav">
    <small style="color:var(--text-muted);padding:12px 16px 4px;text-transform:uppercase;font-size:10px;letter-spacing:1px">Overview</small>
    <a href="/" class="<%= active?('/') %>">ğŸ“Š Dashboard</a>
    <small style="color:var(--text-muted);padding:12px 16px 4px;text-transform:uppercase;font-size:10px;letter-spacing:1px">Management</small>
    <a href="/agents" class="<%= active?('/agents') %>">ğŸ¤– Agents</a>
    <a href="/skills" class="<%= active?('/skills') %>">ğŸ› ï¸ Skills</a>
    <a href="/community-skills" class="<%= active?('/community-skills') %>">ğŸª Community Skills</a>
    <a href="/skill-connections" class="<%= active?('/skill-connections') %>">ğŸ”— Skill Connections</a>
    <a href="/knowledge" class="<%= active?('/knowledge') %>">ğŸ“š Knowledge Bases</a>
    <a href="/knowledge-contributions" class="<%= active?('/knowledge-contributions') %>">ğŸ“š Knowledge Hub</a>
    <a href="/approvals" class="<%= active?('/approvals') %>">âœ… Approvals</a>
    <small style="color:var(--text-muted);padding:12px 16px 4px;text-transform:uppercase;font-size:10px;letter-spacing:1px">Management</small>
    <a href="/workforce" class="<%= active?('/workforce') %>">ğŸ• Workforce</a>
    <a href="/messages" class="<%= active?('/messages') %>">ğŸ’¬ Messages</a>
    <a href="/guardrails" class="<%= active?('/guardrails') %>">ğŸ›¡ï¸ Guardrails</a>
    <a href="/journal" class="<%= active?('/journal') %>">ğŸ“– Journal</a>
    <small style="color:var(--text-muted);padding:12px 16px 4px;text-transform:uppercase;font-size:10px;letter-spacing:1px">Administration</small>
    <a href="/dlp" class="<%= active?('/dlp') %>">ğŸ”’ DLP</a>
    <a href="/compliance" class="<%= active?('/compliance') %>">ğŸ“‹ Compliance</a>
    <a href="/domain-status" class="<%= active?('/domain-status') %>">ğŸ›¡ï¸ Domain</a>
    <a href="/users" class="<%= active?('/users') %>">ğŸ‘¥ Users</a>
    <a href="/vault" class="<%= active?('/vault') %>">ğŸ” Vault</a>
    <a href="/audit" class="<%= active?('/audit') %>">ğŸ“‹ Audit Log</a>
    <a href="/settings" class="<%= active?('/settings') %>">âš™ï¸ Settings</a>
  </nav>
  <div class="sidebar-footer">
    <div style="margin-bottom:6px"><%= escape_html(current_user['email'] || current_user['name'] || 'Admin') %></div>
    <a href="/logout">Sign out</a>
    &nbsp;&middot;&nbsp;
    <button class="theme-toggle" onclick="document.documentElement.toggleAttribute('data-theme');document.documentElement.getAttribute('data-theme')===''?document.documentElement.setAttribute('data-theme','dark'):null" title="Toggle dark mode">&#127763;</button>
  </div>
</aside>
<main class="main">
  <%= flash_messages %>
  <%= content %>
</main>
<script>
// Persist dark mode preference
if(localStorage.getItem('dark')==='1') document.documentElement.setAttribute('data-theme','dark');
document.querySelector('.theme-toggle')?.addEventListener('click',()=>{
  const d=document.documentElement.hasAttribute('data-theme');
  if(d){document.documentElement.removeAttribute('data-theme');localStorage.removeItem('dark')}
  else{document.documentElement.setAttribute('data-theme','dark');localStorage.setItem('dark','1')}
});
</script>
</body>
</html>
