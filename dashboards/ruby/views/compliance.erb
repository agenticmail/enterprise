<div class="page-header">
  <h1>Compliance</h1>
  <p>Generate and review compliance reports</p>
</div>

<div class="card">
  <h3>Generate Report</h3>
  <form method="post" action="/compliance/generate">
    <div class="form-row">
      <div class="form-group">
        <label>Report Type</label>
        <select name="type">
          <option value="soc2">SOC2</option>
          <option value="gdpr">GDPR</option>
          <option value="audit">Audit</option>
        </select>
      </div>
    </div>
    <button class="btn btn-primary" type="submit">Generate Report</button>
  </form>
</div>

<div class="card">
  <h3>Reports (<%= @reports.size %>)</h3>
  <% if @reports.empty? %>
    <div class="empty"><span class="icon">&#128203;</span>No compliance reports generated yet</div>
  <% else %>
    <div class="table-wrap">
      <table>
        <thead><tr><th>Type</th><th>Status</th><th>Score</th><th>Generated By</th><th>Time</th></tr></thead>
        <tbody>
          <% @reports.each do |r| %>
            <tr>
              <td><strong><%= escape_html(r['type'] || r['report_type'] || '-') %></strong></td>
              <td><%= status_badge(r['status'] || 'completed') %></td>
              <td><code><%= escape_html(r['score'] || r['result'] || '-') %></code></td>
              <td><%= escape_html(r['generated_by'] || r['user'] || '-') %></td>
              <td style="color:var(--text-muted)"><%= time_ago(r['created_at'] || r['timestamp']) %></td>
            </tr>
          <% end %>
        </tbody>
      </table>
    </div>
  <% end %>
</div>
