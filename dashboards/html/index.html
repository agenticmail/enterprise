<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>AgenticMail Enterprise Dashboard</title>
  <link rel="stylesheet" href="public/styles.css">
</head>
<body>

<!-- Setup banner (shown if API_URL is still localhost) -->
<div id="setup-banner">
  <h3>Quick Setup</h3>
  <p style="color:var(--text-dim);font-size:13px;margin-bottom:12px;">Enter your AgenticMail Enterprise server URL to get started:</p>
  <div>
    <input type="text" id="setup-url" placeholder="https://your-company.agenticmail.io" value="">
    <button>Connect</button>
  </div>
</div>

<!-- Login Screen -->
<div id="login-screen">
  <div id="login-box">
    <h1><em style="color:var(--primary)">AgenticMail</em> Enterprise</h1>
    <p class="subtitle">Sign in to your dashboard</p>
    <div id="login-error"></div>
    <form>
      <div class="form-group">
        <label class="form-label">Email</label>
        <input class="input" type="email" id="login-email" required autofocus>
      </div>
      <div class="form-group">
        <label class="form-label">Password</label>
        <input class="input" type="password" id="login-password" required>
      </div>
      <button class="btn btn-primary" type="submit" id="login-btn">Sign In</button>
    </form>
  </div>
</div>

<!-- Main App -->
<div id="app">
  <div class="layout">
    <div class="sidebar">
      <div class="sidebar-header">
        <h2><em>Agentic</em>Mail</h2>
        <p>Enterprise Dashboard</p>
      </div>
      <div class="nav">
        <div class="nav-section">Overview</div>
        <button class="nav-item active" data-page="dashboard">Dashboard</button>
        <div class="nav-section">Manage</div>
        <button class="nav-item" data-page="agents">Agents</button>
        <button class="nav-item" data-page="users">Users</button>
        <button class="nav-item" data-page="api-keys">API Keys</button>
        <button class="nav-item" data-page="vault">Vault</button>
        <button class="nav-item" data-page="skills">Skills</button>
        <div class="nav-section">Management</div>
        <button class="nav-item" data-page="messages">Messages</button>
        <button class="nav-item" data-page="guardrails">Guardrails</button>
        <button class="nav-item" data-page="journal">Journal</button>
        <button class="nav-item" data-page="dlp">DLP</button>
        <button class="nav-item" data-page="compliance">Compliance</button>
        <div class="nav-section">System</div>
        <button class="nav-item" data-page="audit">Audit Log</button>
        <button class="nav-item" data-page="settings">Settings</button>
      </div>
      <div class="sidebar-footer">
        <div class="name" id="user-name">-</div>
        <div class="email" id="user-email">-</div>
        <a>Sign out</a>
      </div>
    </div>

    <div class="content" id="page-content">
      <!-- Pages injected here by JS -->
    </div>
  </div>
</div>

<!-- Create Agent Modal -->
<div class="modal-overlay" id="modal-agent">
  <div class="modal">
    <h3>Create Agent</h3>
    <form>
      <div class="form-group"><label class="form-label">Soul / Role Template</label>
        <select class="input" id="agent-soul-id" name="soulId">
          <option value="">-- Select a role template --</option>
          <optgroup label="Support">
            <option value="customer-support-lead">Customer Support Lead</option>
            <option value="technical-support-agent">Technical Support Agent</option>
            <option value="customer-success-manager">Customer Success Manager</option>
          </optgroup>
          <optgroup label="Sales">
            <option value="account-executive">Account Executive</option>
            <option value="sales-development-rep">Sales Development Rep</option>
            <option value="solutions-engineer">Solutions Engineer</option>
          </optgroup>
          <optgroup label="Engineering">
            <option value="senior-software-engineer">Senior Software Engineer</option>
            <option value="devops-engineer">DevOps Engineer</option>
            <option value="qa-engineer">QA Engineer</option>
          </optgroup>
          <optgroup label="Operations">
            <option value="operations-manager">Operations Manager</option>
            <option value="project-coordinator">Project Coordinator</option>
            <option value="executive-assistant">Executive Assistant</option>
          </optgroup>
          <optgroup label="Marketing">
            <option value="content-strategist">Content Strategist</option>
            <option value="growth-marketer">Growth Marketer</option>
            <option value="brand-manager">Brand Manager</option>
          </optgroup>
          <optgroup label="Finance">
            <option value="financial-analyst">Financial Analyst</option>
            <option value="accounts-receivable-specialist">Accounts Receivable Specialist</option>
            <option value="procurement-officer">Procurement Officer</option>
          </optgroup>
          <optgroup label="Legal">
            <option value="contract-reviewer">Contract Reviewer</option>
            <option value="compliance-analyst">Compliance Analyst</option>
            <option value="legal-counsel">Legal Counsel</option>
          </optgroup>
          <optgroup label="Security">
            <option value="security-analyst">Security Analyst</option>
            <option value="incident-responder">Incident Responder</option>
            <option value="security-auditor">Security Auditor</option>
          </optgroup>
        </select>
      </div>
      <div class="form-group"><label class="form-label">Name</label><input class="input" id="agent-name" required placeholder="e.g. researcher"></div>
      <div class="form-group"><label class="form-label">Email (optional)</label><input class="input" id="agent-email" placeholder="auto-generated if blank"></div>
      <div class="form-group"><label class="form-label">Provider</label>
        <select class="input" id="agent-provider">
          <option value="anthropic">Anthropic</option>
          <option value="openai">OpenAI</option>
          <option value="google">Google</option>
          <option value="deepseek">DeepSeek</option>
          <option value="xai">xAI (Grok)</option>
          <option value="mistral">Mistral</option>
          <option value="groq">Groq</option>
          <option value="together">Together</option>
          <option value="fireworks">Fireworks</option>
          <option value="moonshot">Moonshot (Kimi)</option>
          <option value="cerebras">Cerebras</option>
          <option value="openrouter">OpenRouter</option>
          <option value="ollama">Ollama (Local)</option>
          <option value="vllm">vLLM (Local)</option>
          <option value="lmstudio">LM Studio (Local)</option>
          <option value="litellm">LiteLLM (Local)</option>
        </select>
      </div>
      <div class="form-group"><label class="form-label">Model</label>
        <select class="input" id="agent-model">
          <option value="">-- Select a provider first --</option>
        </select>
        <input class="input" id="agent-model-input" placeholder="Type a model ID" style="display:none">
      </div>
      <div class="form-group"><label class="form-label">Role</label>
        <select class="input" id="agent-role"><option>assistant</option><option>secretary</option><option>researcher</option><option>writer</option><option>custom</option></select>
      </div>
      <fieldset class="persona-fieldset"><legend>Persona (optional)</legend>
      <div class="form-row">
        <div class="form-group"><label>Date of Birth</label><input class="input" type="date" id="agent-date-of-birth" name="date_of_birth"></div>
      </div>
      <div class="form-row">
        <div class="form-group"><label>Gender</label><select class="input" id="agent-gender" name="gender"><option value="">Not specified</option><option value="male">Male</option><option value="female">Female</option><option value="non-binary">Non-binary</option></select></div>
      </div>
      <div class="form-row">
        <div class="form-group"><label>Marital Status</label><select class="input" id="agent-marital-status" name="marital_status"><option value="">Not specified</option><option value="single">Single</option><option value="married">Married</option><option value="divorced">Divorced</option></select></div>
        <div class="form-group"><label>Cultural Background</label><select class="input" id="agent-cultural-background" name="cultural_background"><option value="">Not specified</option><option value="north-american">North American</option><option value="british-european">British / European</option><option value="latin-american">Latin American</option><option value="middle-eastern">Middle Eastern</option><option value="east-asian">East Asian</option><option value="south-asian">South Asian</option><option value="southeast-asian">Southeast Asian</option><option value="african">African</option><option value="caribbean">Caribbean</option><option value="australian-pacific">Australian / Pacific</option></select></div>
      </div>
      <div class="form-row">
        <div class="form-group"><label>Language</label><select class="input" id="agent-language" name="language"><option value="en-us">English (American)</option><option value="en-gb">English (British)</option><option value="en-au">English (Australian)</option><option value="es">Spanish</option><option value="pt">Portuguese</option><option value="fr">French</option><option value="de">German</option><option value="ja">Japanese</option><option value="ko">Korean</option><option value="zh">Mandarin</option><option value="hi">Hindi</option><option value="ar">Arabic</option><option value="yo">Yoruba</option><option value="ig">Igbo</option><option value="sw">Swahili</option><option value="it">Italian</option><option value="nl">Dutch</option><option value="ru">Russian</option><option value="tr">Turkish</option><option value="pl">Polish</option><option value="th">Thai</option><option value="vi">Vietnamese</option><option value="id">Indonesian</option><option value="ms">Malay</option><option value="tl">Filipino (Tagalog)</option></select></div>
        <div class="form-group"><label>Communication Style</label><select class="input" id="agent-trait-communication" name="trait_communication"><option value="direct">Direct</option><option value="diplomatic">Diplomatic</option></select></div>
      </div>
      <div class="form-row">
        <div class="form-group"><label>Detail Level</label><select class="input" id="agent-trait-detail" name="trait_detail"><option value="detail-oriented">Detail-oriented</option><option value="big-picture">Big-picture</option></select></div>
        <div class="form-group"><label>Energy</label><select class="input" id="agent-trait-energy" name="trait_energy"><option value="calm">Calm &amp; measured</option><option value="enthusiastic">Enthusiastic</option></select></div>
      </div>
      <div class="form-row">
        <div class="form-group"><label>Humor</label><select class="input" id="agent-humor" name="humor"><option value="witty">Witty</option><option value="dry">Dry</option><option value="warm" selected>Warm</option><option value="none">None</option></select></div>
        <div class="form-group"><label>Formality</label><select class="input" id="agent-formality" name="formality"><option value="formal">Formal</option><option value="casual">Casual</option><option value="adaptive" selected>Adaptive</option></select></div>
      </div>
      <div class="form-row">
        <div class="form-group"><label>Empathy</label><select class="input" id="agent-empathy" name="empathy"><option value="high">High</option><option value="moderate" selected>Moderate</option><option value="reserved">Reserved</option></select></div>
        <div class="form-group"><label>Patience</label><select class="input" id="agent-patience" name="patience"><option value="patient" selected>Patient</option><option value="efficient">Efficient</option></select></div>
      </div>
      <div class="form-row">
        <div class="form-group"><label>Creativity</label><select class="input" id="agent-creativity" name="creativity"><option value="creative" selected>Creative</option><option value="conventional">Conventional</option></select></div>
      </div>
      </fieldset>
      <div class="modal-actions">
        <button class="btn" type="button">Cancel</button>
        <button class="btn btn-primary" type="submit" style="width:auto">Create</button>
      </div>
    </form>
  </div>
</div>

<!-- Create User Modal -->
<div class="modal-overlay" id="modal-user">
  <div class="modal">
    <h3>Create User</h3>
    <form>
      <div class="form-group"><label class="form-label">Name</label><input class="input" id="new-user-name" required></div>
      <div class="form-group"><label class="form-label">Email</label><input class="input" type="email" id="new-user-email" required></div>
      <div class="form-group"><label class="form-label">Role</label>
        <select class="input" id="new-user-role"><option>member</option><option>admin</option><option>owner</option><option>viewer</option></select>
      </div>
      <div class="form-group"><label class="form-label">Password</label><input class="input" type="password" id="new-user-password" required minlength="8"></div>
      <div class="modal-actions">
        <button class="btn" type="button">Cancel</button>
        <button class="btn btn-primary" type="submit" style="width:auto">Create</button>
      </div>
    </form>
  </div>
</div>

<!-- Create API Key Modal -->
<div class="modal-overlay" id="modal-apikey">
  <div class="modal">
    <h3>Create API Key</h3>
    <form>
      <div class="form-group"><label class="form-label">Key Name</label><input class="input" id="apikey-name" required placeholder="e.g. CI/CD pipeline"></div>
      <div class="modal-actions">
        <button class="btn" type="button">Cancel</button>
        <button class="btn btn-primary" type="submit" style="width:auto">Create</button>
      </div>
    </form>
  </div>
</div>

<!-- Create DLP Rule Modal -->
<div class="modal-overlay" id="modal-dlp-rule">
  <div class="modal">
    <h3>Create DLP Rule</h3>
    <form>
      <div class="form-group"><label class="form-label">Rule Name</label><input class="input" id="dlp-rule-name" required placeholder="e.g. Credit Card Numbers"></div>
      <div class="form-group"><label class="form-label">Pattern (regex)</label><input class="input" id="dlp-rule-pattern" required placeholder="e.g. \d{4}-\d{4}-\d{4}-\d{4}"></div>
      <div class="form-group"><label class="form-label">Action</label>
        <select class="input" id="dlp-rule-action"><option value="block">Block</option><option value="redact">Redact</option><option value="flag">Flag Only</option></select>
      </div>
      <div class="form-group"><label class="form-label">Description (optional)</label><input class="input" id="dlp-rule-description" placeholder="What does this rule protect?"></div>
      <div class="modal-actions">
        <button class="btn" type="button">Cancel</button>
        <button class="btn btn-primary" type="submit" style="width:auto">Create</button>
      </div>
    </form>
  </div>
</div>

<!-- Create Anomaly Rule Modal -->
<div class="modal-overlay" id="modal-anomaly-rule">
  <div class="modal">
    <h3>Create Anomaly Rule</h3>
    <form>
      <div class="form-group"><label class="form-label">Rule Name</label><input class="input" id="anomaly-rule-name" required placeholder="e.g. High volume sending"></div>
      <div class="form-group"><label class="form-label">Condition</label><input class="input" id="anomaly-rule-condition" required placeholder="e.g. messages_per_hour > 100"></div>
      <div class="form-group"><label class="form-label">Action</label>
        <select class="input" id="anomaly-rule-action"><option value="alert">Alert</option><option value="pause">Pause Agent</option><option value="kill">Kill Agent</option><option value="throttle">Throttle</option></select>
      </div>
      <div class="form-group"><label class="form-label">Description (optional)</label><input class="input" id="anomaly-rule-description" placeholder="What does this rule detect?"></div>
      <div class="modal-actions">
        <button class="btn" type="button">Cancel</button>
        <button class="btn btn-primary" type="submit" style="width:auto">Create</button>
      </div>
    </form>
  </div>
</div>

<!-- Send Message Modal -->
<div class="modal-overlay" id="modal-message">
  <div class="modal">
    <h3>Send Message</h3>
    <form>
      <div class="form-group"><label class="form-label">From</label><input class="input" id="msg-from" required placeholder="agent@company.com"></div>
      <div class="form-group"><label class="form-label">To</label><input class="input" id="msg-to" required placeholder="recipient@example.com"></div>
      <div class="form-group"><label class="form-label">Subject</label><input class="input" id="msg-subject" required placeholder="Message subject"></div>
      <div class="form-group"><label class="form-label">Body</label><textarea class="input" id="msg-body" rows="4" required placeholder="Message content..."></textarea></div>
      <div class="modal-actions">
        <button class="btn" type="button">Cancel</button>
        <button class="btn btn-primary" type="submit" style="width:auto">Send</button>
      </div>
    </form>
  </div>
</div>

<!-- Generate Compliance Report Modal -->
<div class="modal-overlay" id="modal-compliance">
  <div class="modal">
    <h3>Generate Compliance Report</h3>
    <form>
      <div class="form-group"><label class="form-label">Framework</label>
        <select class="input" id="compliance-framework"><option value="soc2">SOC 2</option><option value="gdpr">GDPR</option><option value="audit">Audit</option></select>
      </div>
      <div class="form-group"><label class="form-label">Report Name (optional)</label><input class="input" id="compliance-name" placeholder="Custom report name"></div>
      <div class="modal-actions">
        <button class="btn" type="button">Cancel</button>
        <button class="btn btn-primary" type="submit" style="width:auto">Generate</button>
      </div>
    </form>
  </div>
</div>

<!-- Toast -->
<div id="toast"></div>

<script src="dist/bundle.js"></script>
</body>
</html>
